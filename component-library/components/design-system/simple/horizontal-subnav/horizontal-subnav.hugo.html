{{ $menu := .menu_id }}
{{ $backgroundColor := "" }}
{{ $labelColor := "" }}
{{ $items := slice }}

{{ if .background_c }}
  {{ $backgroundColor = .background_c }}
{{ end }}

{{ if .label_c }}
  {{ $labelColor = .label_c }}
{{ end }}
    
<div class="{{ $backgroundColor }}">
  <div class="container">
    <nav class="navbar navbar-expand-lg">
      <a class="navbar-brand wvu-shout text-decoration-none {{ $labelColor }}" href="#">{{ .title }}</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0 iowan-old-style-black small">
          {{ if not site.Data }}
            {{ partial "bookshop" (slice "design-system/generic/collection-tooltip" (dict "text" "This component will not display the collection pages inside the bookshop browser" ) ) }}
          {{ else if and (site.Params.env_bookshop_live) (.config.hide_collection_pages) }}
            {{ partial "bookshop" (slice "design-system/generic/collection-tooltip" (dict "text" "'Hide collection pages' is currently selected in this component to speed up the editing of other areas - to see the pages here uncheck 'hide collection pages'" ) ) }}
          {{ else }}
            {{ range site.Data.menus }}
              {{ if eq .uuid $menu }}
                {{ $items = .items }}
              {{ end }}
            {{ end }}
            {{ range $items }}
              <li class="nav-item">
                <a class="nav-link" href="{{ .pageRef }}">{{ .name }}</a>
              </li>
            {{ end }}
          {{ end }}
        </ul>
      </div>
    </nav>
  </div>
</div>